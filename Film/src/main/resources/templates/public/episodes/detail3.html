<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{/public/layout/layout :: main-fragment(
~{:: title},
~{:: #css-resources},
~{:: #main-content},
~{:: #js-resources}
)}">

<head>
    <!-- Basic need -->
    <title>Block Buster | Movie Player</title>
    <meta charset="UTF-8">
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name="author" content="">




    <th:block id="css-resources">
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
                href="https://fonts.googleapis.com/css2?family=Montserrat:wght@200;300;400;500;600;700;800;900&display=swap"
                rel="stylesheet"
        />
        <link rel="stylesheet" href='http://fonts.googleapis.com/css?family=Dosis:400,700,500|Nunito:300,400,600' />
        <link rel="icon" th:href="@{/public/images/movie-reel.png}">
        <link rel="stylesheet" th:href="@{/public/css/plugins.css}">
        <link rel="stylesheet" th:href="@{/public/css/style.css}">
        <link rel="stylesheet" th:href="@{/public/css/style_movie_home.css}">
        <link rel="stylesheet" th:href="@{/public/css/all.min.css}">
        <link rel="stylesheet" th:href="@{/public/css/google-fonts-fallback.css}">
        <link rel="stylesheet"
              th:href="@{https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200}" />
        <link rel="stylesheet" th:href="@{https://fonts.googleapis.com/icon?family=Material+Icons}">
    </th:block>
</head>
<body>

<main id="main-content">
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
    <br>  <br>  <br>  <br>  <br>  <br>  <br>  <br>

    <div class="trailers  full-width">
        <!--     -->
        <div class=" row ipad-width">
            <!--           " style="margin-top: 100px;-->
            <div class="">
                <!--                col-md-9 col-sm-12 col-xs-12-->
                <div class="title-hd">
                    <h2 id="episode-title"></h2>
                    <a href="#" class="viewall">View all <i class="ion-ios-arrow-right"></i></a>
                </div>
                <section class="videos">
                    <div class="slider-for-2 video-ft">
                        <div class="video-container" >
                           <div id="episode-number">
                               <video id="video" >
                                <source  src="" type=video/mp4>
                                Your browser does not support the video tag.</video>
                               <!--                                                    <video id="video" >-->
<!--                                <source src="https://storage.cloud.google.com/testcloudvido/test.mp4" type=video/mp4>-->
<!--                                &lt;!&ndash;                                <source id="video-source" type="video/mp4">&ndash;&gt;-->
<!--                                Your browser does not support the video tag.-->
<!--                            </video> -->
                           </div>
                            <span class="custom-loader"></span>

                            <div class="player-state">
									<span class="state-btn state-backward">
									  <ion-icon name="play-back-outline"></ion-icon>
									  <span class="backward-duration">5</span>
									</span>
                                <span class="main-state state-btn">
									  <ion-icon name="play-outline"></ion-icon>
									</span>
                                <span class="state-btn state-forward">
									  <span class="forward-duration">5</span>
									  <ion-icon name="play-forward-outline"></ion-icon>
									</span>
                            </div>
                            <div class="controls">
                                <div class="duration">
                                    <div class="current-time"></div>
                                    <div class="hover-time">
                                        <span class="hover-duration"></span>
                                    </div>
                                    <div class="buffer"></div>
                                </div>
                                <div class="btn-controls">
                                    <div class="btn-con">
										<span class="play-pause control-btn">
										  <ion-icon name="play-outline"></ion-icon>
										</span>
                                        <span class="volume">
										  <span class="mute-unmute control-btn">
											<ion-icon name="volume-high-outline"></ion-icon>
										  </span>
										  <div class="max-vol">
											<div class="current-vol"></div>
										  </div>
										</span>
                                        <span class="time-container">
										  <span class="current-duration">0:00</span>
										  <span>/</span>
										  <span class="total-duration">0:00</span>
										</span>
                                    </div>
                                    <div class="right-controls">
										<span class="backward control-btn" title="5 backward">
										  <ion-icon name="play-back-outline"></ion-icon>
										</span>
                                        <span class="forward control-btn" title="5 forward">
										  <ion-icon name="play-forward-outline"></ion-icon>
										</span>
                                        <span class="mini-player control-btn">
										  <ion-icon name="albums-outline"></ion-icon>
										</span>
                                        <span class="settings control-btn">
										  <span class="setting-btn">
											<ion-icon name="options-outline"></ion-icon>
										  </span>
										  <ul class="setting-menu">
											<li data-value="0.25">0.25x</li>
											<li data-value="0.5">0.5x</li>
											<li data-value="0.75">0.75x</li>
											<li data-value="1" class="speed-active">1x</li>
											<li data-value="1.25">1.25x</li>
											<li data-value="1.5">1.5x</li>
											<li data-value="1.75">1.75x</li>
											<li data-value="2">2x</li>
										  </ul>
										</span>
                                        <span class="theater-btn control-btn">
										  <span class="theater-default">
											<ion-icon name="tablet-landscape-outline"></ion-icon>
										  </span>
										  <span class="theater-active">
											<ion-icon name="tv-outline"></ion-icon>
										  </span>
										</span>
                                        <span class="fullscreen-btn control-btn" title="fullscreen">
										  <span class="full">
											<ion-icon name="scan-outline"></ion-icon>
										  </span>
										  <span class="contract">
											<ion-icon name="contract-outline"></ion-icon>
										  </span>
										</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--playlist-->
                    <div class="slider-nav-2 thumb-ft">
                        <div class="item" id="related-movies">
                            <div class="trailer-img">
                                <img th:src="@{/public/images/uploads/trailer7.jpg}" alt="photo by Barn Images" width="4096"
                                     height="2737">
                            </div>
                            <div class="trailer-infor">
                                <h4 class="desc" >  </h4>
                                <p>2:30</p>
                            </div>
                        </div>
                        <div class="item">
                            <div class="trailer-img">
                                <img th:src="@{/public/images/uploads/trailer5.jpg}" alt="photo by Wojciech Szaturski" width="360"
                                     height="189">
                            </div>
                            <div class="trailer-infor">
                                <h4 class="desc">Fast&Furious 8</h4>
                                <p>3:11</p>
                            </div>
                        </div>

                    </div>
                </section>
            </div>

        </div>

    </div>
    <!-- Commend new v2 section-->
    <div class="page-single">
        <div class="container">
            <div class="row">
                <div class="col-md-9 col-sm-12 col-xs-12">
                    <div class="blog-detail-ct">
                        <!-- share link -->
                        <div class="flex-it share-tag">
                            <div class="social-link">
                                <h4>Share it</h4>
                                <a href="#"><i class="ion-social-facebook"></i></a>
                                <a href="#"><i class="ion-social-twitter"></i></a>
                                <a href="#"><i class="ion-social-googleplus"></i></a>
                                <a href="#"><i class="ion-social-pinterest"></i></a>
                                <a href="#"><i class="ion-social-linkedin"></i></a>
                            </div>
                            <div class="right-it">
                                <h4>Tags</h4>
                                <a href="#">Gray,</a>
                                <a href="#">Film,</a>
                                <a href="#">Poster</a>
                            </div>
                        </div>
                        <!-- comment items -->
                        <div class="comments">
                            <h4>04 Comments</h4>
                            <div class="cmt-item flex-it">
                                <img th:src="@{/public/images/uploads/author.png}" alt="">
                                <div class="author-infor">
                                    <div class="flex-it2">
                                        <h6><a href="#">Steve Perry</a></h6> <span class="time"> - 27 Mar 2017</span>
                                    </div>
                                    <p>Even though Journey's classic vocalist Steve Perry didn’t reunite with the band
                                        during their Rock Hall performance (to the dismay of hopeful fans), he did offer
                                        up a touching speech.</p>
                                    <p><a class="rep-btn" href="#">+ Reply</a></p>
                                </div>
                            </div>
                            <div class="cmt-item flex-it reply">
                                <img th:src="@{/public/images/uploads/author2.png}" alt="">
                                <div class="author-infor">
                                    <div class="flex-it2">
                                        <h6><a href="#">Joss Whedon</a></h6> <span class="time"> - 27 Mar 2017</span>
                                    </div>
                                    <p>Prince died not long after the 2016 Rock Hall ceremony, so this year's edition
                                        featured Lenny Kravitz and a full gospel choir performing a swamp-funk take on
                                        When Doves Cry.</p>
                                </div>
                            </div>
                            <div class="cmt-item flex-it reply">
                                <img th:src="@{/public/images/uploads/author3.png}" alt="">
                                <div class="author-infor">
                                    <div class="flex-it2">
                                        <h6><a href="#">Dave McNary</a></h6> <span class="time"> - 27 Mar 2017</span>
                                    </div>
                                    <p>Blue Sky Studios is one of the world’s leading digital animation movie studios
                                        and we are proud of their commitment to stay and grow in Connecticut.</p>
                                </div>
                            </div>
                            <div class="cmt-item flex-it">
                                <img th:src="@{/public/images/uploads/author4.png}" alt="">
                                <div class="author-infor">
                                    <div class="flex-it2">
                                        <h6><a href="#">Margot Robbie</a></h6> <span class="time"> - 27 Mar 2017</span>
                                    </div>
                                    <p>Joan Baez was the sharpest of the Rock Hall inductees, singing about deportees
                                        and talking social activism as well as joking about her age and the likelihood
                                        that a good portion of the Barclays. </p>
                                    <p><a class="rep-btn" href="#">+ Reply</a></p>
                                </div>
                            </div>
                        </div>
                        <div class="comment-form">
                            <h4>Leave a comment</h4>
                            <form action="">
                                <div class="row">
                                    <div class="col-md-4">
                                        <input type="text" placeholder="Your name">
                                    </div>
                                    <div class="col-md-4">
                                        <input type="text" placeholder="Your email">
                                    </div>
                                    <div class="col-md-4">
                                        <input type="text" placeholder="Website">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <textarea name="message" id="" placeholder="Message"></textarea>
                                    </div>
                                </div>
                                <input class="submit" type="submit" placeholder="submit">
                            </form>
                        </div>
                        <!-- comment form -->
                    </div>
                </div>

            </div>
        </div>
    </div>
    <!--end of commend new v2 section-->

</main>

<th:block id="js-resources">
    <script
            type="module"
            src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"
    ></script>
    <script
            nomodule
            src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"
    ></script>
    <script th:src="@{/public/js/jquery.js}"></script>
    <script th:src="@{/public/js/plugins.js}"></script>
    <script th:src="@{/public/js/plugins2.js}"></script>
    <script th:src="@{/public/js/custom.js}"></script>
    <script th:src="@{/public/js/myjs.js}"></script>
    <script th:src="@{/public/js/script_movie_home.js}"></script>
    <script  >
        $(document).ready(function() {
        // Get the episode ID from the URL parameters
        var urlParams = new URLSearchParams(window.location.search);
        var episodeId = urlParams.get('id');

        if (!episodeId) {
            console.error("Error: Episode ID not found in the URL parameters.");
            return;
        }

        // Fetch episode details from the REST API
        fetchEpisodeDetails(episodeId);

        // Fetch related movies for the episode
        fetchRelatedEpisode(episodeId);
    });

    function fetchEpisodeDetails(episodeId) {
        $.ajax({
            url: "/api/public/episode/" + episodeId,
            type: "GET",
            success: function(data) {
                console.log(data); // Log the entire response object
                // Display episode details
                $("#episode-title").text(data.name);

                $("#episode-description").text(data.description);
                $("#episode-duration").text(data.duration + " minutes");

var video = document.getElementById('video');
var source = document.createElement('source');

source.setAttribute('src', data.link);

video.appendChild(source);
video.play();

            },
            error: function(xhr, status, error) {
                console.error("Error fetching episode details: ", error);
            }
        });
    }

    function fetchRelatedEpisode(episodeId) {
        $.ajax({
            url: "/api/public/episode/" + episodeId + "/related",
            type: "GET",
            success: function(data) {

            },
            error: function(xhr, status, error) {
                console.error("Error fetching related episodes: ", error);
            }
        });
    }

    </script>
</th:block>

<!--<script th:src="@{/public/js/video-loader.js}"></script>-->
<!--<script>-->
<!--    loadVideoFromGoogleCloud('video-source', 'https://storage.cloud.google.com/testcloudvido/test.mp4');-->
<!--</script>-->
</body>
</html>
